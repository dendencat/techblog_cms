<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}{{ blog_title }}{% endblock %}</title>
  <!-- Tailwind CSS CDN (ÊúÄÊñ∞Áâà„ÇíÂà©Áî®) -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.0/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100">

  <!-- „Éò„ÉÉ„ÉÄ„Éº üöÄ -->
  <header class="bg-white shadow p-4 flex items-center justify-between">
    <div class="text-2xl font-bold">{% block blog_title %}My Awesome Blog{% endblock %}</div>
    <div class="flex-1 mx-4">
      <input type="text" id="searchBox" placeholder="Ë®ò‰∫ã„ÇíÊ§úÁ¥¢..." class="w-full px-4 py-2 border rounded" />
    </div>
    <div>
      <button class="px-4 py-2 bg-blue-500 text-white rounded">Login / Register</button>
    </div>
  </header>

  <div class="container mx-auto mt-6 flex">
    <!-- „Çµ„Ç§„Éâ„Éê„Éº üìö -->
    <aside class="w-1/4 px-4">
      <!-- „Éï„Ç©„É≠„ÉºË®ò‰∫ã -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Follow Articles</h2>
        <ul id="followLinks" class="list-disc pl-5">
          <li><a href="#" class="text-blue-500 hover:underline">Article 1</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Article 2</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Article 3</a></li>
        </ul>
      </div>
      <!-- „Éà„É¨„É≥„ÉâË®ò‰∫ã -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Trending Articles</h2>
        <ul id="trendingLinks" class="list-disc pl-5">
          <li><a href="#" class="text-blue-500 hover:underline">Trending 1</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Trending 2</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Trending 3</a></li>
        </ul>
      </div>
      <!-- „Ç´„ÉÜ„Ç¥„É™ -->
      <div>
        <h2 class="text-xl font-semibold mb-2">Categories</h2>
        <ul id="categoryLinks" class="list-disc pl-5">
          <li><a href="#" class="text-blue-500 hover:underline">Category 1</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Category 2</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Category 3</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Category 4</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Category 5</a></li>
          <li><a href="#" class="text-blue-500 hover:underline">Category 6</a></li>
        </ul>
      </div>
    </aside>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ üì∞ -->
    <main class="flex-1 px-4">
      <!-- 3„Ç´„É©„É†„Ç∞„É™„ÉÉ„Éâ„ÅßË®ò‰∫ã„ÇíË°®Á§∫ -->
      <div id="articlesGrid" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- ÂêÑË®ò‰∫ã„Éú„ÉÉ„ÇØ„Çπ„ÅØÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
      </div>
      <!-- Infinite Scroll „ÅÆ„Åü„ÇÅ„ÅÆ Sentinel -->
      <div id="scrollSentinel" class="h-8"></div>
    </main>
  </div>

  <!-- JavaScript ÈÉ®ÂàÜ üéØ -->
  <script>
    // Ë®ò‰∫ã„Éá„Éº„Çø„ÅÆ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
    let articlesData = [];
    let currentPage = 1;
    const articlesPerPage = 9;

    /**
     * Ë®ò‰∫ã„Çí„Éï„Çß„ÉÉ„ÉÅ„Åô„Çã„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Èñ¢Êï∞
     * ÂÆüÈöõ„Å´„ÅØ AJAX „Å™„Å©„Åß JSON „Éá„Éº„Çø„ÇíÂèñÂæó„Åó„Å¶„Åè„Å†„Åï„ÅÑ
     */
    function fetchArticles(page) {
      return new Promise((resolve) => {
        setTimeout(() => {
          const newArticles = [];
          for (let i = 1; i <= articlesPerPage; i++) {
            const articleId = (page - 1) * articlesPerPage + i;
            newArticles.push({
              id: articleId,
              title: 'Article Title ' + articleId,
              excerpt: 'This is a summary of article ' + articleId + '.',
              link: '#'
            });
          }
          resolve(newArticles);
        }, 500);
      });
    }

    // Ë®ò‰∫ã„Çí„Ç∞„É™„ÉÉ„Éâ„Å´„É¨„É≥„ÉÄ„É™„É≥„Ç∞
    function renderArticles(articles) {
      const articlesGrid = document.getElementById('articlesGrid');
      articles.forEach(article => {
        const articleBox = document.createElement('div');
        articleBox.className = 'bg-white p-4 rounded shadow hover:shadow-lg transition duration-200';
        articleBox.innerHTML = `
          <h3 class="text-xl font-bold mb-2">${article.title}</h3>
          <p class="text-gray-700 mb-4">${article.excerpt}</p>
          <a href="${article.link}" class="text-blue-500 hover:underline">Read More</a>
        `;
        articlesGrid.appendChild(articleBox);
      });
    }

    // Ê¨°„ÅÆ„Éö„Éº„Ç∏„ÅÆË®ò‰∫ã„ÇíË™≠„ÅøËæº„ÇÄ
    async function loadMoreArticles() {
      const newArticles = await fetchArticles(currentPage);
      articlesData = articlesData.concat(newArticles);
      renderArticles(newArticles);
      currentPage++;
    }

    // Ê§úÁ¥¢„Éú„ÉÉ„ÇØ„Çπ„Å´„Çà„ÇãË®ò‰∫ã„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
    function filterArticles(query) {
      const filtered = articlesData.filter(article => 
        article.title.toLowerCase().includes(query.toLowerCase()) || 
        article.excerpt.toLowerCase().includes(query.toLowerCase())
      );
      const articlesGrid = document.getElementById('articlesGrid');
      articlesGrid.innerHTML = '';
      renderArticles(filtered);
    }

    // Ê§úÁ¥¢„Éú„ÉÉ„ÇØ„Çπ„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
    document.getElementById('searchBox').addEventListener('input', (e) => {
      const query = e.target.value;
      if(query.trim() === '') {
        // Ê§úÁ¥¢„ÅåÁ©∫„Å™„Çâ„Åô„Åπ„Å¶„ÅÆË®ò‰∫ã„ÇíÂÜçÊèèÁîª
        document.getElementById('articlesGrid').innerHTML = '';
        renderArticles(articlesData);
      } else {
        filterArticles(query);
      }
    });

    // Intersection Observer „Å´„Çà„Çã Infinite Scroll „ÅÆÂÆüË£Ö
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          loadMoreArticles();
        }
      });
    }, {
      root: null,
      rootMargin: '0px',
      threshold: 1.0
    });

    // Sentinel „ÅÆÁõ£Ë¶ñÈñãÂßã
    observer.observe(document.getElementById('scrollSentinel'));

    // ÂàùÊúü„É≠„Éº„Éâ
    loadMoreArticles();
  </script>
</body>
</html>
